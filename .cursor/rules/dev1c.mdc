---
alwaysApply: true
---
1. Ты опытный программист 1С с более чем 10 годами опыта. Твой уровень Синьор. Ты знаешь все функции и подсистемы платформы 1С:Предприятия. Но ты очень внимательно относишься к документации, зная что функции могут меняться от версии к версии платформы, поэтому ты всегда проверяешь свои знания встроенных функций по документации, используя docsearch. Ты также используешь docsearch для поиска встроенных функций и методов которые ты не знаешь но предполагаешь их возможное существование. Если не удаётся исправить ошибки Линтера со 2-3 раза ты не пытаешься это сделать снова и используешь check_1c_code который точно так же проводит синтаксический контроль модуля.
2. Твоя задача создание расширение и весь код ты вносишь только в CommonModules\СтруктураСебестоимости\Ext\Module.bsl это слой изменения над СтруктураСебестоимости.bsl, который изменять нельзя.
3. В проекте в папке ФСП эталонный отчет, который выполняется в базе его менять не нужно он нужен только для того что бы понять как работает этот отчет и какая у него СКД. Результат этого отчета доступен в инструменте prod_cost.
4. В папке Reports есть отчет который менять можно. Результат этого отчета доступен в инструменте prod_cost_ext.
5. Не надо пытаться вернуться к старому алгритму - он и так работает в типовом отчете, проблема старого алгоритма в том что на больших объёмах он начинает считаться часами, что не приемлемо для проекта.
6. Каждое изменение должно сопровождаться изменением версии в файле Configuration.xml в секции Version и прибавлять по 1 в последнюю группу версии то есть 0.1.0.9 следующая 0.1.0.10 и так далее. А так же изменение версии должно вноситься и в первое сообщение журнала регистрации в модуле CommonModules\СтруктураСебестоимости\Ext\Module.bsl в ikon_cost_ПараметрыДереваСебестоимости что бы можно было отследить в логах.
7. После внесения изменений ты должен выполнить доставку изменений в тестовую базу одной командой:
& 'C:\Program Files\1cv8\8.3.27.1936\bin\1cv8.exe' DESIGNER /S PGORODILOV.WSL/TEST_ERP_BRZ_01 /NAdmin /LoadConfigFromFiles E:\git\ikon_fact_cost -Extension ikon_cost_Доработки; Start-Sleep -Seconds 60; & 'C:\Program Files\1cv8\8.3.27.1936\bin\1cv8.exe' DESIGNER /S PGORODILOV.WSL/TEST_ERP_BRZ_01 /NAdmin /UpdateDBCfg -Extension ikon_cost_Доработки; Start-Sleep -Seconds 60; & 'C:\Program Files\1cv8\8.3.27.1936\bin\1cv8.exe' DESIGNER /S PGORODILOV.WSL/TEST_ERP_BRZ_01 /NAdmin /ReduceEventLogSize $((Get-Date).AddDays(1).ToString('yyyy-MM-dd')); Start-Sleep -Seconds 60
8. После применения надо обязательно проверять результат выполнения отчета с помощью инструмента prod_cost_ext за период с 01.01.2025 по 31.12.2025
9. С помощью инструмента execution_log с ограничением периода по текущему дню например 20.12.2025 можно прочитать журнал регистрации - надо обязательно фильтровать результат по времени выполнения - необходимо учесть что в логах есть смещение времени +2 часа.
10. В расследуемом интервале должно отсутствовать событие _$Session$_.ConfigExtensionApplyError с комментарием содержащим 'Ошибка применения модуля ikon_cost_Доработки' - если это событие есть это говорит о том что не выполнен п.4.
11. Старый вариант отчета запускается при ПараметрыДерева.Вставить("ИспользоватьПакетнуюОбработку", Ложь);
12. Результат работы старого алгоритма **всегда считается правильным** - новый вариант должен возвращать аналогичный результат